# NextStat 21 CFR Part 11 Compliance Documentation

**Document ID:** NS-REG-001  
**Version:** 1.0.0  
**Status:** Template — requires organization-specific policies  
**Applicable Regulations:** 21 CFR Part 11 (Electronic Records; Electronic Signatures)  

---

## 1. Executive Summary

This document maps NextStat software capabilities and recommended operational controls to the requirements of 21 CFR Part 11. It is intended for pharma/biotech organizations deploying NextStat in GxP-regulated environments for pharmacometric analysis, statistical computing, and regulatory submissions.

NextStat is a **Category 4 (Configured Product)** under GAMP 5 classification. Validation follows a risk-based approach aligned with ISPE GAMP 5 and FDA guidance on Part 11 scope and application.

---

## 2. Scope

### 2.1 In Scope

- Electronic records generated by NextStat (NLME artifacts, model fit results, diagnostic outputs)
- Reproducibility and provenance controls (RunBundle, dataset hashing)
- Audit trail capabilities (integration with NS-Audit subsystem)
- Access controls and user authentication (deployment-level)

### 2.2 Out of Scope

- Electronic signatures (NextStat does not implement digital signatures; these must be provided by the organization's document management system)
- Network security and infrastructure controls (IT responsibility)
- Training records management

---

## 3. Part 11 Requirements Mapping

### Subpart B — Electronic Records

#### § 11.10 Controls for Closed Systems

| Requirement | § Reference | NextStat Control | Status |
|-------------|------------|------------------|--------|
| (a) Validation | § 11.10(a) | IQ/OQ/PQ protocol (NS-VAL-001). Automated test suite (`cargo test --release`) with 300+ unit tests covering all estimation methods. | ✅ Implemented |
| (b) Generate accurate and complete copies | § 11.10(b) | `NlmeArtifact` JSON export with full round-trip fidelity. CSV exports for all result components. `RunBundle` provenance capture. | ✅ Implemented |
| (c) Protection of records | § 11.10(c) | File-system permissions (deployment-level). Artifact schema includes `created_at` timestamp and `schema_version`. Immutable once written. | ⚠️ Procedural — requires org SOP |
| (d) Limit system access | § 11.10(d) | Deployment-level: OS user accounts, RBAC via deployment platform. NextStat itself is a computational library; access control is at the infrastructure layer. | ⚠️ Procedural — requires org SOP |
| (e) Audit trails | § 11.10(e) | `RunBundle` captures: software version, git revision, git dirty flag, Rust toolchain, OS, CPU, random seeds, dataset hashes (SHA-256), reference tool versions, and free-text notes. NS-Audit subsystem (when deployed) provides timestamped, append-only audit log. | ✅ Implemented |
| (f) Operational system checks | § 11.10(f) | Input validation at all API boundaries (parameter ranges, dimension checks, NaN/Inf guards). `ErrorModel::validate()`, `OdeOptions::validate()`. Return `Result<T>` for all fallible operations. | ✅ Implemented |
| (g) Authority checks | § 11.10(g) | Deployment-level RBAC. NS-Audit can log user identity with each action when configured. | ⚠️ Procedural |
| (h) Device checks | § 11.10(h) | Not applicable (NextStat is not a device). Hardware is validated as part of IQ. | N/A |
| (i) Training | § 11.10(i) | Documentation provided: API docs, benchmark suite, enterprise pilot runbook. Training records are organization's responsibility. | ⚠️ Procedural |
| (j) Written policies | § 11.10(j) | This document + NS-VAL-001 (IQ/OQ/PQ) + org SOPs. | ⚠️ Requires org SOPs |
| (k) Documentation controls | § 11.10(k) | Version-controlled source code (Git). CHANGELOG.md tracks all changes. Semantic versioning. | ✅ Implemented |

#### § 11.30 Controls for Open Systems

NextStat is designed for deployment in **closed systems** (private infrastructure, on-premises or private cloud). If deployed in an open system, additional encryption and digital signature controls must be applied per § 11.30.

### Subpart C — Electronic Signatures

#### § 11.50 Signature Manifestations

NextStat does not implement electronic signatures. Organizations must use their existing electronic signature system (e.g., DocuSign, Adobe Sign, or validated EDMS) for:
- Approval of validation reports
- Sign-off on model analysis results
- Regulatory submission signatures

#### § 11.70 Signature/Record Linking

When electronic signatures are applied to NextStat artifacts, the organization's EDMS must ensure the signature is linked to the specific artifact version (e.g., via SHA-256 hash of the JSON artifact file).

---

## 4. Technical Controls Detail

### 4.1 Data Integrity

| Control | Implementation |
|---------|---------------|
| **Artifact immutability** | `NlmeArtifact` is serialized to JSON once. Schema version (`v2.0.0`) prevents silent format changes. |
| **Dataset provenance** | `DatasetProvenance` stores label, SHA-256 hash, row count, and column count for each input dataset. Hash verified at load time. |
| **Seed reproducibility** | `RunBundle.seeds` captures all random seeds (SAEM, VPC, simulation). Same seeds → identical results (bit-for-bit). |
| **Round-trip fidelity** | All structs implement `Serialize`/`Deserialize` (serde). JSON export → import → re-export produces identical output. Verified by automated tests. |

### 4.2 Audit Trail

| Component | Description |
|-----------|-------------|
| **RunBundle** | Embedded in every `NlmeArtifact`. Captures NextStat version, git revision + dirty flag, Rust version, target triple, OS, CPU model, seeds, datasets, reference tools, and notes. |
| **NS-Audit** (optional) | Append-only audit log with timestamps, user identity, action type, and entity references. Supports SQLite (local) and PostgreSQL (enterprise) backends. |
| **Git history** | All source code changes tracked in Git with signed commits. `CHANGELOG.md` documents user-facing changes. |

### 4.3 Validation Infrastructure

| Component | Description |
|-----------|-------------|
| **Automated test suite** | 300+ unit tests, integration tests, and benchmark tests. Run via `cargo test --release`. |
| **Pharma benchmark suite** | Warfarin, Theophylline, Phenobarbital synthetic datasets with parameter recovery validation. |
| **Phase 3 benchmarks** | SAEM/PD/ODE integration tests with cross-solver parity checks. |
| **CI/CD** | GitHub Actions runs full test suite on every PR. Nightly slow benchmarks via `apex2-nightly-slow.yml`. |

---

## 5. Procedural Controls (Organization Responsibility)

The following controls must be established by the deploying organization:

### 5.1 Standard Operating Procedures (SOPs)

| SOP | Purpose |
|-----|---------|
| **SOP-NS-001: Software Installation** | Procedures for installing, configuring, and qualifying NextStat |
| **SOP-NS-002: Change Control** | Process for evaluating, approving, and implementing NextStat version upgrades |
| **SOP-NS-003: Access Control** | User account management, role assignments, password policies |
| **SOP-NS-004: Backup and Recovery** | Data backup schedules, retention periods, disaster recovery |
| **SOP-NS-005: Incident Management** | Reporting and investigating software defects or unexpected results |
| **SOP-NS-006: Training** | User training requirements, competency assessment, training records |
| **SOP-NS-007: Periodic Review** | Annual review of system suitability and revalidation triggers |

### 5.2 Access Control Matrix

| Role | Install/Configure | Run Analysis | Approve Results | Modify Config | View Audit Log |
|------|:-:|:-:|:-:|:-:|:-:|
| System Administrator | ✅ | ❌ | ❌ | ✅ | ✅ |
| Pharmacometrician | ❌ | ✅ | ❌ | ❌ | ✅ |
| Senior Scientist | ❌ | ✅ | ✅ | ❌ | ✅ |
| QA Reviewer | ❌ | ❌ | ✅ | ❌ | ✅ |
| IT Security | ❌ | ❌ | ❌ | ✅ | ✅ |

---

## 6. Risk Assessment

### 6.1 GAMP 5 Risk Classification

| Function | Risk Level | Rationale | Mitigation |
|----------|-----------|-----------|------------|
| FOCE/SAEM estimation | High | Directly affects PK parameter estimates used in dosing decisions | Validated against synthetic data with known true parameters. Cross-method parity (SAEM vs FOCE). |
| PD models | High | Affects efficacy/safety predictions | Algebraic models verified analytically. ODE models cross-validated (RK45 vs ESDIRK). |
| ODE solvers | Medium | Supports PD models; indirect impact on decisions | Verified against analytical solutions. Adaptive error control. |
| Diagnostics (VPC, GOF) | Medium | Supports model evaluation but not direct parameter estimation | Validated that observed statistics fall within simulated intervals. |
| Data I/O | Medium | Incorrect parsing → wrong results | NONMEM format parser with comprehensive validation. SHA-256 dataset hashing. |
| Artifact export | Low | Documentation/reporting; not computational | Round-trip serialization tests. Schema versioning. |

---

## 7. Compliance Checklist

Before deploying NextStat in a GxP environment, complete the following:

- [ ] Execute IQ protocol (NS-VAL-001 §5)
- [ ] Execute OQ protocol (NS-VAL-001 §6)
- [ ] Execute PQ protocol (NS-VAL-001 §7)
- [ ] Prepare Validation Summary Report (NS-VAL-002)
- [ ] Establish SOPs (SOP-NS-001 through SOP-NS-007)
- [ ] Configure access controls per §5.2 matrix
- [ ] Enable audit trail (RunBundle + NS-Audit if available)
- [ ] Document system in site master validation plan
- [ ] Obtain QA approval for GxP use
- [ ] Schedule periodic revalidation (minimum: annual)

---

## 8. References

| Document | Description |
|----------|-------------|
| 21 CFR Part 11 | Electronic Records; Electronic Signatures (FDA) |
| ICH E6(R2) | Guideline for Good Clinical Practice |
| EU Annex 11 | Computerised Systems (EudraLex Volume 4) |
| ISPE GAMP 5 | A Risk-Based Approach to Compliant GxP Computerized Systems |
| NS-VAL-001 | NextStat IQ/OQ/PQ Validation Protocol |
| FDA Guidance (2003) | Scope and Application of 21 CFR Part 11 |
| PIC/S PI 011-3 | Good Practices for Computerised Systems in Regulated Environments |

---

**Document Control:**

| Version | Date | Author | Change Description |
|---------|------|--------|-------------------|
| 1.0.0 | 2026-02-12 | NextStat Team | Initial template |
