---
title: "NextStat Playground (WASM)"
status: draft
---

# NextStat Playground (WASM)

The NextStat Playground is a static browser demo for running **asymptotic CLs upper limits**
(q~tilde~) directly on a `pyhf`-style `workspace.json` — no Python environment and no server.

It is intended for:
- quick sanity checks on a workspace
- demos and sharing reproducible results as a single JSON file + a URL
- low-friction onboarding (“open link → drop JSON → see Brazil bands”)

## What it computes (MVP)

- Global fit (best-fit parameters, including `mu_hat`)
- Asymptotic CLs `hypotest` (q~tilde~)
- Observed and expected upper limits (Brazil bands)
- A full CLs scan curve used for plotting/interpolation

## Repo layout

- WASM bindings: `bindings/ns-wasm/` (Rust + `wasm-bindgen`)
- Static UI: `playground/` (HTML + JS + Web Worker)
- Generated artifacts: `playground/pkg/` (JS shim + `.wasm`, generated by `wasm-bindgen`)

`playground/pkg/` is **gitignored** and must be generated locally or in CI before publishing.

## Run locally

Prereqs:
- Rust toolchain (see `rust-toolchain.toml`)
- `wasm32-unknown-unknown` target: `rustup target add wasm32-unknown-unknown`
- `wasm-bindgen` CLI: `cargo install wasm-bindgen-cli --version 0.2.108` (version should match `Cargo.lock`)

Build the WASM bundle:

From the repo root:

```bash
make playground-build-wasm
```

Serve the playground (workers/modules require HTTP, not `file://`):

```bash
make playground-serve
```

Open `http://localhost:8000/` and drag & drop a `workspace.json`.

Example inputs:
- `playground/examples/simple_workspace.json`
- `tests/fixtures/simple_workspace.json`

## Deploy (static hosting)

Any static host (GitHub Pages, Cloudflare Pages, Netlify, …) can serve `playground/`, but you
must ensure `playground/pkg/` is present in the published artifact.

Two common approaches:
1. Build the WASM bundle in CI and publish the resulting `playground/` directory.
2. Commit `playground/pkg/` (quickest for a one-off demo, but less ideal for development).
